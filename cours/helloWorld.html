<!DOCTYPE html>
<html>
<head>
    <title>Hello World</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta charset="UTF-8">
</head>
<body>
<div id="log"></div>
<script type="text/javascript">
    // Un premier commentaire en JavaScript.
    /*
       Un second commentaire
       en Javascript.
    */
    var log = document.querySelector('#log');

    ['log','warn','error'].forEach(function (verb) {
        console[verb] = (function (method, verb, log) {
            return function (text) {
                method(text);
                // handle distinguishing between methods any way you'd like
                var msg = document.createElement('code');
                msg.classList.add(verb);
                msg.innerHTML =  text + "</br>";
                log.appendChild(msg);
            };
        })(console[verb].bind(console), verb, log);
    });

    console.log("Hello World");

    var t = [['courgettes', 8], ['carottes', 15], ['tomates', 12], ['potirons', 5]];

    function addTitle(title){
        var element = document.body.appendChild(document.createElement('h1'));
        element.innerText = title;
    }

    function addElement(tableau, elt, quantity) {
        tableau.push([elt, quantity]);
    }

    function display(tableau) {
        //pour ne pas afficher les éléments à quantity = 0
        tableau = tableau.filter(function (item) {
            return item[1] > 0;
        });

        tableau.map(function (item) {
            element.innerHTML = element.innerHTML + '</br> ֎ ' + item[0] + ' : ' + item[1] + ' unité(s)'
        });
    }

    function changeQuantity(tableau, elt, qt) {
        var tab2 = tableau.map(function (item) {
            return item[0];
        });
        tableau[tab2.indexOf(elt)][1] = qt;
    }

    addTitle('Tableau initial');
    var element = document.body.appendChild(document.createElement('div'));
    display(t);

    addTitle('Ajout de 44 haricots dans la liste');
    addElement(t, 'haricots', 44);
    element = document.body.appendChild(document.createElement('div'));
    display(t);

    addTitle('Ajout d\'éléments avec une fonction auto-exécutée');
    element = document.body.appendChild(document.createElement('div'));
    function autoex(elt, qt) {
        (function() {
            addElement(t, elt, qt);
        }) (elt, qt);
    }
    autoex('balai', 1);
    autoex('dentifrice', 2);
    autoex('camembert', 3);
    display(t);

    addTitle('Ajout d\'un balai dans la liste (changement de sa quantité à 2)');
    element = document.body.appendChild(document.createElement('div'));
    changeQuantity(t, 'balai', 2);
    display(t);

    addTitle('Passage de la quantité des carottes à 0 (et donc pas d\'affichage de l\'élément');
    element = document.body.appendChild(document.createElement('div'));
    changeQuantity(t, 'carottes', 0);
    display(t);

    let majorite = (age) => (age > 18 ? element.innerHTML = 'Majeur' : element.innerHTML = 'Mineur');
    console.log(majorite(19));

    console.warn(majorite(15));

    addTitle('Point de vie');
    element = document.body.appendChild(document.createElement('div'));
    var pv = 10;

    var degat = function ()
    {
        pv--;
    };

    var esquive = false;

    esquive || degat();
    element.innerHTML = pv;

    addTitle('Ouagadougou');
    element = document.body.appendChild(document.createElement('div'));
    var string = 'ouagadougou';

    let i = 0;
    var count = 0;

    while (i < string.length) {
        if ('o' === string[i] && 'u' === string[i + 1]) {
            count++;
        }

        i++;
    }

    element.innerHTML = count;


    addTitle('C\'est carré');
    element = document.body.appendChild(document.createElement('canvas'));
    element.setAttribute('id', 'mycanvas');

    var canvas = document.getElementById("mycanvas");
    var context = canvas.getContext("2d");
    context.strokeStyle = "green";

    context.beginPath();
    context.moveTo(0, 0);
    context.lineTo(100, 0);
    context.lineTo(100, 100);
    context.lineTo(0, 100);
    context.closePath();
    context.stroke();
</script>
</body>
</html>
